@{
    // Determine layout based on page location or ViewData
    var layoutName = ViewData["Layout"]?.ToString();
    
    if (string.IsNullOrEmpty(layoutName))
    {
        // Auto-detect layout based on page path
        var pagePath = ViewContext.ActionDescriptor.DisplayName ?? "";
        
        if (pagePath.Contains("/Auth/") || pagePath.Contains("Login") || pagePath.Contains("Register"))
        {
            layoutName = "Layouts/_AuthLayout";
        }
        else if (ViewData["UseBlankLayout"] as bool? == true)
        {
            layoutName = "Layouts/_BlankLayout";
        }
        else
        {
            layoutName = "Layouts/_MainLayout";
        }
    }
    
    Layout = layoutName;
}