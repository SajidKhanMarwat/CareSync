@page "/Patient/Dashboard"
@model CareSync.Pages.Patient.DashboardModel
@{
    ViewData["Title"] = "Patient Dashboard - Health Overview";
}

@section PageActions {
    <div class="d-flex gap-2 flex-wrap">
        <div class="input-group" style="width: 300px;">
            <span class="input-group-text bg-primary-lighten">
                <i class="ri-calendar-2-line text-primary"></i>
            </span>
            <input type="text" id="dateRangePicker" class="form-control custom-daterange" placeholder="Select Date Range">
        </div>
        <button type="button" class="btn btn-success" onclick="location.href='/Patient/BookAppointment'">
            <i class="ri-calendar-event-line me-1"></i>Book Appointment
        </button>
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#requestLabTestModal">
            <i class="ri-test-tube-line me-1"></i>Request Lab Test
        </button>
    </div>
}

<!-- Patient Profile Header -->
<div class="row gx-3">
    <div class="col-sm-12">
        <div class="card mb-3 border">
            <div class="card-body">
                <div class="d-flex flex-wrap justify-content-between">
                    <!-- Patient Info -->
                    <div class="d-flex align-items-center flex-wrap gap-4">
                        <div class="d-flex align-items-center">
                            <div class="icon-box lg bg-primary-subtle rounded-5 me-2">
                                <i class="ri-account-circle-line fs-3 text-primary"></i>
                            </div>
                            <div>
                                <h4 class="mb-1">@Model.PatientName</h4>
                                <p class="m-0 text-muted">Name</p>
                            </div>
                        </div>
                        <div class="d-flex align-items-center">
                            <div class="icon-box lg bg-primary-subtle rounded-5 me-2">
                                <i class="ri-user-3-line fs-3 text-primary"></i>
                            </div>
                            <div>
                                <h4 class="mb-1">@Model.Gender</h4>
                                <p class="m-0 text-muted">Gender</p>
                            </div>
                        </div>
                        <div class="d-flex align-items-center">
                            <div class="icon-box lg bg-primary-subtle rounded-5 me-2">
                                <i class="ri-calendar-line fs-3 text-primary"></i>
                            </div>
                            <div>
                                <h4 class="mb-1">@Model.Age</h4>
                                <p class="m-0 text-muted">Age</p>
                            </div>
                        </div>
                        <div class="d-flex align-items-center">
                            <div class="icon-box lg bg-danger-subtle rounded-5 me-2">
                                <i class="ri-contrast-drop-2-line fs-3 text-danger"></i>
                            </div>
                            <div>
                                <h4 class="mb-1">@Model.BloodType</h4>
                                <p class="m-0 text-muted">Blood Type</p>
                            </div>
                        </div>
                    </div>
                    <!-- Patient Avatar -->
                    <img src="~/theme/images/user.png" class="img-7x rounded-circle" alt="Patient">
                </div>
            </div>
            <div class="card-footer bg-light">
                <div class="row g-3">
                    <div class="col-md-4">
                        <div class="d-flex align-items-center">
                            <div class="icon-box sm bg-primary-subtle rounded-5 me-2">
                                <i class="ri-stethoscope-line fs-5 text-primary"></i>
                            </div>
                            <div>
                                <small class="text-muted d-block">Primary Doctor</small>
                                <span class="fw-semibold text-primary">@Model.PrimaryDoctor</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="d-flex align-items-center">
                            <div class="icon-box sm bg-success-subtle rounded-5 me-2">
                                <i class="ri-calendar-check-line fs-5 text-success"></i>
                            </div>
                            <div>
                                <small class="text-muted d-block">Last Visit</small>
                                <span class="fw-semibold text-success">@Model.LastVisitDate</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="d-flex align-items-center">
                            <div class="icon-box sm bg-warning-subtle rounded-5 me-2">
                                <i class="ri-calendar-event-line fs-5 text-warning"></i>
                            </div>
                            <div>
                                <small class="text-muted d-block">Next Appointment</small>
                                <span class="fw-semibold text-warning">@Model.NextAppointmentDate</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Quick Stats Overview -->
<div class="row gx-3 mb-3">
    <div class="col-xxl-3 col-sm-6">
        <div class="card border rounded-5 hover-lift">
            <div class="card-body">
                <div class="d-flex align-items-center">
                    <div class="icon-box lg bg-primary-subtle rounded-5 me-3">
                        <i class="ri-calendar-event-line fs-3 text-primary"></i>
                    </div>
                    <div class="flex-grow-1">
                        <h3 class="text-primary mb-1">@Model.UpcomingAppointments</h3>
                        <small class="text-muted">Upcoming Appointments</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xxl-3 col-sm-6">
        <div class="card border rounded-5 hover-lift">
            <div class="card-body">
                <div class="d-flex align-items-center">
                    <div class="icon-box lg bg-success-subtle rounded-5 me-3">
                        <i class="ri-medicine-bottle-line fs-3 text-success"></i>
                    </div>
                    <div class="flex-grow-1">
                        <h3 class="text-success mb-1">@Model.ActivePrescriptions</h3>
                        <small class="text-muted">Active Prescriptions</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xxl-3 col-sm-6">
        <div class="card border rounded-5 hover-lift">
            <div class="card-body">
                <div class="d-flex align-items-center">
                    <div class="icon-box lg bg-warning-subtle rounded-5 me-3">
                        <i class="ri-test-tube-line fs-3 text-warning"></i>
                    </div>
                    <div class="flex-grow-1">
                        <h3 class="text-warning mb-1">@Model.PendingLabTests</h3>
                        <small class="text-muted">Pending Lab Tests</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xxl-3 col-sm-6">
        <div class="card border rounded-5 hover-lift">
            <div class="card-body">
                <div class="d-flex align-items-center">
                    <div class="icon-box lg bg-info-subtle rounded-5 me-3">
                        <i class="ri-file-text-line fs-3 text-info"></i>
                    </div>
                    <div class="flex-grow-1">
                        <h3 class="text-info mb-1">@Model.NewReports</h3>
                        <small class="text-muted">New Lab Reports</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

  <!-- Row starts -->
  <div class="row gx-3">
    <div class="col-sm-12">
      <div class="card mb-3">
        <div class="card-header">
          <h5 class="card-title">Visits</h5>
        </div>
        <div class="card-body pt-0">
          <div class="table-outer">
            <div class="table-responsive">
              <table class="table align-middle truncate m-0">
                <thead>
                  <tr>
                    <th>Consulting Doctor</th>
                    <th>Visit Date</th>
                    <th>Department</th>
                    <th>Fee Paid</th>
                    <th>Lab Reports</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>
                      <img src="~/ApolloTheme/assets/images/doctor1.png" class="img-3x rounded-2" alt="Medical Dashboard">
                      Dr. Hector
                    </td>
                    <td>20/05/2024</td>
                    <td>Orthopaedics</td>
                    <td>$200</td>
                    <td>
                      <div class="d-inline-flex gap-1">
                        <button type="button" class="btn btn-primary btn-sm" data-bs-toggle="modal"
                          data-bs-target="#viewReportsModal1">
                          View Reports
                        </button>
                        <button type="button" class="btn btn-outline-primary btn-sm" data-bs-toggle="tooltip"
                          data-bs-placement="top" data-bs-title="Download Report">
                          <i class="ri-file-download-line"></i>
                        </button>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td colspan="5">
                      <h6>Prescription</h6>
                      <p class="text-wrap m-0">The prescriptions featured in the dataset exhibit illegible
                        handwriting, commonly encountered in medical practices. These images serve as
                        invaluable resources for developing and evaluating algorithms aimed at enhancing
                        handwriting recognition technologies within the medical domain.
                      </p>
                    </td>
                  </tr>
                  <tr>
                    <td colspan="5">
                      <h6>Reports</h6>
                      <ul class="list-unstyled d-flex m-0">
                        <li class="pe-2 border-end">Weight: 48lbs</li>
                        <li class="px-2 border-end">Blood Pressure: 120</li>
                        <li class="px-2 border-end">Sugar Levels Before: 90</li>
                        <li class="px-2 border-end">Sugar Levels After: 180</li>
                      </ul>
                    </td>
                  </tr>
                  <tr>
                    <td colspan="5">
                      <h6>Medicines</h6>
                      <p>For 10 Days</p>
                      <div class="d-flex gap-3">
                        <ul class="d-flex gap-5 m-0">
                          <li>
                            <div>
                              <h6>Aricep Tablet</h6>
                              <ul class="list-unstyled d-flex mb-3">
                                <li class="pe-2 border-end">Morning: 1</li>
                                <li class="px-2 border-end">Afternoon: 0</li>
                                <li class="px-2">Night: 1</li>
                              </ul>
                            </div>
                          </li>
                          <li>
                            <div>
                              <h6>Cresemba Capsule</h6>
                              <ul class="list-unstyled d-flex mb-3">
                                <li class="pe-2 border-end">Morning: 0</li>
                                <li class="px-2 border-end">Afternoon: 1</li>
                                <li class="px-2">Night: 1</li>
                              </ul>
                            </div>
                          </li>
                          <li>
                            <div>
                              <h6>Justoza Tablet</h6>
                              <ul class="list-unstyled d-flex mb-3">
                                <li class="pe-2 border-end">Morning: 1</li>
                                <li class="px-2 border-end">Afternoon: 1</li>
                                <li class="px-2">Night: 0</li>
                              </ul>
                            </div>
                          </li>
                        </ul>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Row ends -->

  <!-- Row starts -->
  <div class="row gx-3">
    <div class="col-xxl-3 col-sm-6 col-12">
      <div class="card mb-3">
        <div class="card-body">
          <div class="text-center">
            <div class="mb-3">
              <i class="ri-capsule-line fs-1 text-primary"></i>
            </div>
            <div class="mb-4">
              <h5>BP Levels</h5>
              <p class="m-0 opacity-50">Recent five visits</p>
            </div>
          </div>
          <div class="overflow-hidden">
            <div id="bpLevels" class="mb-3"></div>
          </div>
          <ul class="list-group">
            <li class="list-group-item d-flex justify-content-between align-items-center">
              <div>24/04/2024</div>
              <div>140</div>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center">
              <div>16/04/2024</div>
              <div>190</div>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center">
              <div>10/04/2024</div>
              <div>230</div>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="col-xxl-3 col-sm-6 col-12">
      <div class="card mb-3">
        <div class="card-body">
          <div class="text-center">
            <div class="mb-3">
              <i class="ri-contrast-drop-2-line fs-1 text-primary"></i>
            </div>
            <div class="mb-4">
              <h5>Sugar Levels</h5>
              <p class="m-0 opacity-50">Recent five visits</p>
            </div>
          </div>
          <div class="overflow-hidden">
            <div id="sugarLevels" class="mb-3"></div>
          </div>
          <ul class="list-group">
            <li class="list-group-item d-flex justify-content-between align-items-center">
              <div>24/04/2024</div>
              <div>140</div>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center">
              <div>16/04/2024</div>
              <div>190</div>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center">
              <div>10/04/2024</div>
              <div>230</div>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="col-xxl-3 col-sm-6 col-12">
      <div class="card mb-3">
        <div class="card-body">
          <div class="text-center">
            <div class="mb-3">
              <i class="ri-heart-pulse-line fs-1 text-primary"></i>
            </div>
            <div class="mb-4">
              <h5>Heart Rate</h5>
              <p class="m-0 opacity-50">Recent five visits</p>
            </div>
          </div>
          <div class="overflow-hidden">
            <div id="heartRate" class="mb-3"></div>
          </div>
          <ul class="list-group">
            <li class="list-group-item d-flex justify-content-between align-items-center">
              <div>24/04/2024</div>
              <div>110</div>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center">
              <div>16/04/2024</div>
              <div>120</div>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center">
              <div>10/04/2024</div>
              <div>100</div>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="col-xxl-3 col-sm-6 col-12">
      <div class="card mb-3">
        <div class="card-body">
          <div class="text-center">
            <div class="mb-3">
              <i class="ri-flask-line fs-1 text-primary"></i>
            </div>
            <div class="mb-4">
              <h5>Cholesterol</h5>
              <p class="m-0 opacity-50">Recent five visits</p>
            </div>
          </div>
          <div class="overflow-hidden">
            <div id="clolesterolLevels" class="mb-3"></div>
          </div>
          <ul class="list-group">
            <li class="list-group-item d-flex justify-content-between align-items-center">
              <div>24/04/2024</div>
              <div>180</div>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center">
              <div>16/04/2024</div>
              <div>220</div>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center">
              <div>10/04/2024</div>
              <div>230</div>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <!-- Row ends -->
