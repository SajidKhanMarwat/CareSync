@page "/Lab/ManageServices"
@model CareSync.Pages.Lab.ManageServicesModel
@{
    ViewData["Title"] = "Manage Services";
}

@section PageActions {
    <div class="d-flex gap-2">
        <a href="~/Lab/AddService" class="btn btn-success">
            <i class="ri-add-line me-1"></i>Add New Service
        </a>
        <button type="button" class="btn btn-primary">
            <i class="ri-upload-line me-1"></i>Import Services
        </button>
        <button type="button" class="btn btn-outline-info">
            <i class="ri-download-line me-1"></i>Export Services
        </button>
    </div>
}

<!-- Service Management Statistics -->
<div class="row gx-3 mb-3">
    <div class="col-xl-4 col-sm-6">
        <div class="card border rounded-5">
            <div class="card-body">
                <div class="d-flex align-items-center">
                    <div class="icon-box lg bg-success-subtle rounded-5 me-3">
                        <i class="ri-check-line fs-4 text-success"></i>
                    </div>
                    <div>
                        <h4 class="text-success mb-1">52</h4>
                        <small class="text-muted">Active Services</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xl-4 col-sm-6">
        <div class="card border rounded-5">
            <div class="card-body">
                <div class="d-flex align-items-center">
                    <div class="icon-box lg bg-warning-subtle rounded-5 me-3">
                        <i class="ri-pause-circle-line fs-4 text-warning"></i>
                    </div>
                    <div>
                        <h4 class="text-warning mb-1">7</h4>
                        <small class="text-muted">Inactive Services</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xl-4 col-sm-6">
        <div class="card border rounded-5">
            <div class="card-body">
                <div class="d-flex align-items-center">
                    <div class="icon-box lg bg-info-subtle rounded-5 me-3">
                        <i class="ri-calendar-line fs-4 text-info"></i>
                    </div>
                    <div>
                        <h4 class="text-info mb-1">1,245</h4>
                        <small class="text-muted">Tests This Month</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Service Management Panel -->
<div class="row gx-3">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <div class="d-flex justify-content-between align-items-center">
                    <h5 class="card-title mb-0">
                        <i class="ri-settings-3-line me-2"></i>Service Management
                    </h5>
                    <div class="d-flex gap-2">
                        <input type="search" class="form-control form-control-sm" placeholder="Search services..." style="width: 250px;">
                        <select class="form-select form-select-sm" style="width: auto;">
                            <option>All Status</option>
                            <option>Active</option>
                            <option>Inactive</option>
                            <option>Pending Review</option>
                        </select>
                        <select class="form-select form-select-sm" style="width: auto;">
                            <option>All Categories</option>
                            <option>Hematology</option>
                            <option>Clinical Chemistry</option>
                            <option>Microbiology</option>
                            <option>Immunology</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <!-- Bulk Actions -->
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="selectAll">
                        <label class="form-check-label" for="selectAll">
                            Select All
                        </label>
                    </div>
                    <div class="d-flex gap-2">
                        <button class="btn btn-sm btn-outline-success" id="bulkActivate">
                            <i class="ri-check-line me-1"></i>Activate Selected
                        </button>
                        <button class="btn btn-sm btn-outline-warning" id="bulkDeactivate">
                            <i class="ri-pause-line me-1"></i>Deactivate Selected
                        </button>
                        <button class="btn btn-sm btn-outline-danger" id="bulkDelete">
                            <i class="ri-delete-bin-line me-1"></i>Delete Selected
                        </button>
                    </div>
                </div>
                
                <!-- Services Table -->
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead class="table-light">
                            <tr>
                                <th style="width: 30px;">
                                    <input class="form-check-input" type="checkbox" id="selectAllCheckbox">
                                </th>
                                <th>Service Name</th>
                                <th>Category</th>
                                <th>Sample Type</th>
                                <th>Price</th>
                                <th>Status</th>
                                <th>Usage Count</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <input class="form-check-input service-checkbox" type="checkbox">
                                </td>
                                <td>
                                    <div>
                                        <h6 class="mb-0">Complete Blood Count (CBC)</h6>
                                        <small class="text-muted">Full blood analysis</small>
                                    </div>
                                </td>
                                <td><span class="badge bg-primary-subtle text-primary">Hematology</span></td>
                                <td><span class="badge bg-danger-subtle text-danger">Blood</span></td>
                                <td>$45.00</td>
                                <td><span class="badge bg-success">Active</span></td>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <span class="me-2">245</span>
                                        <div class="progress" style="width: 60px; height: 5px;">
                                            <div class="progress-bar bg-success" style="width: 80%"></div>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <div class="dropdown">
                                        <button class="btn btn-sm btn-outline-primary dropdown-toggle" type="button" data-bs-toggle="dropdown">
                                            Actions
                                        </button>
                                        <ul class="dropdown-menu">
                                            <li><a class="dropdown-item" href="~/Lab/ViewService/1">
                                                <i class="ri-eye-line me-2"></i>View Details
                                            </a></li>
                                            <li><a class="dropdown-item" href="~/Lab/EditService/1">
                                                <i class="ri-edit-line me-2"></i>Edit
                                            </a></li>
                                            <li><a class="dropdown-item" href="#">
                                                <i class="ri-file-copy-line me-2"></i>Duplicate
                                            </a></li>
                                            <li><hr class="dropdown-divider"></li>
                                            <li><a class="dropdown-item text-warning" href="#">
                                                <i class="ri-pause-line me-2"></i>Deactivate
                                            </a></li>
                                            <li><a class="dropdown-item text-danger" href="#">
                                                <i class="ri-delete-bin-line me-2"></i>Delete
                                            </a></li>
                                        </ul>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <input class="form-check-input service-checkbox" type="checkbox">
                                </td>
                                <td>
                                    <div>
                                        <h6 class="mb-0">Basic Metabolic Panel (BMP)</h6>
                                        <small class="text-muted">Electrolytes and kidney function</small>
                                    </div>
                                </td>
                                <td><span class="badge bg-success-subtle text-success">Clinical Chemistry</span></td>
                                <td><span class="badge bg-warning-subtle text-warning">Serum</span></td>
                                <td>$55.00</td>
                                <td><span class="badge bg-success">Active</span></td>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <span class="me-2">198</span>
                                        <div class="progress" style="width: 60px; height: 5px;">
                                            <div class="progress-bar bg-success" style="width: 65%"></div>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <div class="dropdown">
                                        <button class="btn btn-sm btn-outline-primary dropdown-toggle" type="button" data-bs-toggle="dropdown">
                                            Actions
                                        </button>
                                        <ul class="dropdown-menu">
                                            <li><a class="dropdown-item" href="~/Lab/ViewService/2">
                                                <i class="ri-eye-line me-2"></i>View Details
                                            </a></li>
                                            <li><a class="dropdown-item" href="~/Lab/EditService/2">
                                                <i class="ri-edit-line me-2"></i>Edit
                                            </a></li>
                                            <li><a class="dropdown-item" href="#">
                                                <i class="ri-file-copy-line me-2"></i>Duplicate
                                            </a></li>
                                            <li><hr class="dropdown-divider"></li>
                                            <li><a class="dropdown-item text-warning" href="#">
                                                <i class="ri-pause-line me-2"></i>Deactivate
                                            </a></li>
                                            <li><a class="dropdown-item text-danger" href="#">
                                                <i class="ri-delete-bin-line me-2"></i>Delete
                                            </a></li>
                                        </ul>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <input class="form-check-input service-checkbox" type="checkbox">
                                </td>
                                <td>
                                    <div>
                                        <h6 class="mb-0">Lipid Profile</h6>
                                        <small class="text-muted">Cholesterol and triglycerides</small>
                                    </div>
                                </td>
                                <td><span class="badge bg-success-subtle text-success">Clinical Chemistry</span></td>
                                <td><span class="badge bg-warning-subtle text-warning">Serum</span></td>
                                <td>$65.00</td>
                                <td><span class="badge bg-success">Active</span></td>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <span class="me-2">176</span>
                                        <div class="progress" style="width: 60px; height: 5px;">
                                            <div class="progress-bar bg-success" style="width: 58%"></div>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <div class="dropdown">
                                        <button class="btn btn-sm btn-outline-primary dropdown-toggle" type="button" data-bs-toggle="dropdown">
                                            Actions
                                        </button>
                                        <ul class="dropdown-menu">
                                            <li><a class="dropdown-item" href="~/Lab/ViewService/3">
                                                <i class="ri-eye-line me-2"></i>View Details
                                            </a></li>
                                            <li><a class="dropdown-item" href="~/Lab/EditService/3">
                                                <i class="ri-edit-line me-2"></i>Edit
                                            </a></li>
                                            <li><a class="dropdown-item" href="#">
                                                <i class="ri-file-copy-line me-2"></i>Duplicate
                                            </a></li>
                                            <li><hr class="dropdown-divider"></li>
                                            <li><a class="dropdown-item text-warning" href="#">
                                                <i class="ri-pause-line me-2"></i>Deactivate
                                            </a></li>
                                            <li><a class="dropdown-item text-danger" href="#">
                                                <i class="ri-delete-bin-line me-2"></i>Delete
                                            </a></li>
                                        </ul>
                                    </div>
                                </td>
                            </tr>
                            <tr class="table-warning">
                                <td>
                                    <input class="form-check-input service-checkbox" type="checkbox">
                                </td>
                                <td>
                                    <div>
                                        <h6 class="mb-0">COVID-19 PCR Test</h6>
                                        <small class="text-muted">SARS-CoV-2 detection</small>
                                    </div>
                                </td>
                                <td><span class="badge bg-info-subtle text-info">Molecular Biology</span></td>
                                <td><span class="badge bg-success-subtle text-success">Nasopharyngeal Swab</span></td>
                                <td>$120.00</td>
                                <td><span class="badge bg-warning">Inactive</span></td>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <span class="me-2">0</span>
                                        <div class="progress" style="width: 60px; height: 5px;">
                                            <div class="progress-bar bg-secondary" style="width: 0%"></div>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <div class="dropdown">
                                        <button class="btn btn-sm btn-outline-primary dropdown-toggle" type="button" data-bs-toggle="dropdown">
                                            Actions
                                        </button>
                                        <ul class="dropdown-menu">
                                            <li><a class="dropdown-item" href="~/Lab/ViewService/4">
                                                <i class="ri-eye-line me-2"></i>View Details
                                            </a></li>
                                            <li><a class="dropdown-item" href="~/Lab/EditService/4">
                                                <i class="ri-edit-line me-2"></i>Edit
                                            </a></li>
                                            <li><a class="dropdown-item" href="#">
                                                <i class="ri-file-copy-line me-2"></i>Duplicate
                                            </a></li>
                                            <li><hr class="dropdown-divider"></li>
                                            <li><a class="dropdown-item text-success" href="#">
                                                <i class="ri-play-line me-2"></i>Activate
                                            </a></li>
                                            <li><a class="dropdown-item text-danger" href="#">
                                                <i class="ri-delete-bin-line me-2"></i>Delete
                                            </a></li>
                                        </ul>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <input class="form-check-input service-checkbox" type="checkbox">
                                </td>
                                <td>
                                    <div>
                                        <h6 class="mb-0">Blood Culture</h6>
                                        <small class="text-muted">Bacterial detection and sensitivity</small>
                                    </div>
                                </td>
                                <td><span class="badge bg-warning-subtle text-warning">Microbiology</span></td>
                                <td><span class="badge bg-danger-subtle text-danger">Blood</span></td>
                                <td>$85.00</td>
                                <td><span class="badge bg-success">Active</span></td>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <span class="me-2">89</span>
                                        <div class="progress" style="width: 60px; height: 5px;">
                                            <div class="progress-bar bg-success" style="width: 30%"></div>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <div class="dropdown">
                                        <button class="btn btn-sm btn-outline-primary dropdown-toggle" type="button" data-bs-toggle="dropdown">
                                            Actions
                                        </button>
                                        <ul class="dropdown-menu">
                                            <li><a class="dropdown-item" href="~/Lab/ViewService/5">
                                                <i class="ri-eye-line me-2"></i>View Details
                                            </a></li>
                                            <li><a class="dropdown-item" href="~/Lab/EditService/5">
                                                <i class="ri-edit-line me-2"></i>Edit
                                            </a></li>
                                            <li><a class="dropdown-item" href="#">
                                                <i class="ri-file-copy-line me-2"></i>Duplicate
                                            </a></li>
                                            <li><hr class="dropdown-divider"></li>
                                            <li><a class="dropdown-item text-warning" href="#">
                                                <i class="ri-pause-line me-2"></i>Deactivate
                                            </a></li>
                                            <li><a class="dropdown-item text-danger" href="#">
                                                <i class="ri-delete-bin-line me-2"></i>Delete
                                            </a></li>
                                        </ul>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <!-- Pagination -->
                <div class="d-flex justify-content-between align-items-center mt-3">
                    <div class="text-muted">
                        Showing 1 to 5 of 59 services
                    </div>
                    <nav>
                        <ul class="pagination pagination-sm mb-0">
                            <li class="page-item disabled">
                                <a class="page-link" href="#" tabindex="-1">Previous</a>
                            </li>
                            <li class="page-item active"><a class="page-link" href="#">1</a></li>
                            <li class="page-item"><a class="page-link" href="#">2</a></li>
                            <li class="page-item"><a class="page-link" href="#">3</a></li>
                            <li class="page-item">
                                <a class="page-link" href="#">Next</a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Select All functionality
            const selectAllCheckbox = document.getElementById('selectAllCheckbox');
            const serviceCheckboxes = document.querySelectorAll('.service-checkbox');
            
            selectAllCheckbox.addEventListener('change', function() {
                serviceCheckboxes.forEach(checkbox => {
                    checkbox.checked = this.checked;
                });
            });
            
            // Bulk actions
            document.getElementById('bulkActivate').addEventListener('click', function() {
                const selected = Array.from(serviceCheckboxes).filter(cb => cb.checked).length;
                if (selected === 0) {
                    alert('Please select at least one service');
                    return;
                }
                if (confirm(`Activate ${selected} selected service(s)?`)) {
                    alert('Services activated successfully');
                }
            });
            
            document.getElementById('bulkDeactivate').addEventListener('click', function() {
                const selected = Array.from(serviceCheckboxes).filter(cb => cb.checked).length;
                if (selected === 0) {
                    alert('Please select at least one service');
                    return;
                }
                if (confirm(`Deactivate ${selected} selected service(s)?`)) {
                    alert('Services deactivated successfully');
                }
            });
            
            document.getElementById('bulkDelete').addEventListener('click', function() {
                const selected = Array.from(serviceCheckboxes).filter(cb => cb.checked).length;
                if (selected === 0) {
                    alert('Please select at least one service');
                    return;
                }
                if (confirm(`Delete ${selected} selected service(s)? This action cannot be undone.`)) {
                    alert('Services deleted successfully');
                }
            });
        });
    </script>
}
